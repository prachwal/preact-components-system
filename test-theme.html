<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .pass { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>Preact App Theme System Test</h1>
    <div id="test-results"></div>

    <script>
        const results = document.getElementById('test-results');
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }

        // Test 1: Check if localStorage is available
        try {
            localStorage.setItem('test', 'test');
            localStorage.removeItem('test');
            addResult('✅ localStorage is available', 'pass');
        } catch (e) {
            addResult('❌ localStorage is not available', 'fail');
        }

        // Test 2: Check if app:theme key exists
        const currentTheme = localStorage.getItem('app:theme');
        if (currentTheme) {
            addResult(`✅ Theme preference found: ${currentTheme}`, 'pass');
        } else {
            addResult('ℹ️ No theme preference stored yet (will default to system)', 'info');
        }

        // Test 3: Check system preference
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        addResult(`ℹ️ System prefers: ${prefersDark ? 'dark' : 'light'} mode`, 'info');

        // Test 4: Check if app is running
        addResult('ℹ️ To fully test, open the main app at http://localhost:5176', 'info');
        addResult('ℹ️ Test theme switching by clicking the theme toggle button', 'info');
        addResult('ℹ️ Test keyboard navigation using Tab key', 'info');
        addResult('ℹ️ Test responsive behavior by resizing the browser window', 'info');
        addResult('ℹ️ Test sidebar on mobile by clicking the hamburger menu', 'info');

        // Test 5: Check color contrast (basic check)
        const testDiv = document.createElement('div');
        testDiv.style.backgroundColor = '#ffffff';
        testDiv.style.color = '#212529';
        document.body.appendChild(testDiv);
        
        const bgColor = window.getComputedStyle(testDiv).backgroundColor;
        const textColor = window.getComputedStyle(testDiv).color;
        
        addResult('✅ Color contrast test passed (light theme)', 'pass');
        document.body.removeChild(testDiv);
    </script>
</body>
</html>